# ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÑ‡∏•‡πÄ‡∏ã‡∏ô‡∏™‡πå WebMeter

‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÑ‡∏•‡πÄ‡∏ã‡∏ô‡∏™‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á WebMeter ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡∏Ñ‡∏µ‡∏¢‡πå ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô HWID ‡πÅ‡∏•‡∏∞‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏°‡∏≤‡πÉ‡∏´‡πâ‡∏î‡∏µ‡∏û‡∏•‡∏≠‡∏¢‡∏ö‡∏ô Railway ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö Inno Setup

## ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö (System Overview)

1. **License Key Generator (Keygen)**
   - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏µ‡∏¢‡πå‡∏ó‡∏µ‡∏•‡∏∞‡∏ä‡∏∏‡∏î‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡∏∞‡∏´‡∏•‡∏≤‡∏¢ ‡πÜ ‡∏Ñ‡∏µ‡∏¢‡πå (batch)
   - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î ‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÑ‡∏•‡πÄ‡∏ã‡∏ô‡∏™‡πå (demo/full/OEM) ‡πÑ‡∏î‡πâ
   - ‡∏°‡∏µ checksum ‡πÅ‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏±‡∏ô‡∏Ñ‡∏µ‡∏¢‡πå‡∏õ‡∏•‡∏≠‡∏°
   - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á PostgreSQL ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
2. **License Validation Server (API)**
   - REST API ‡πÉ‡∏´‡πâ‡∏ù‡∏±‡πà‡∏á installer ‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö installer secret, ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏µ‡∏¢‡πå, ‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ ‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ
   - ‡πÄ‡∏Å‡πá‡∏ö log ‡∏ó‡∏∏‡∏Å‡∏Å‡∏≤‡∏£ activate ‡∏û‡∏£‡πâ‡∏≠‡∏° HWID/metadata
   - ‡∏°‡∏µ endpoint ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏µ‡∏¢‡πå (revoke/suspend) ‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
3. **‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏±‡∏ö Inno Setup**
   - Installer ‡∏™‡πà‡∏á `{licenseKey, hwid, installerSecret, installerVersion}` ‡∏°‡∏≤‡∏ó‡∏µ‡πà `/api/v1/licenses/validate`
   - ‡∏£‡∏±‡∏ö‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î (`VALID`, `INVALID_INSTALLER`, `KEY_EXPIRED`, ‡∏Ø‡∏•‡∏Ø)
   - ‡∏ñ‡πâ‡∏≤‡∏ñ‡∏π‡∏Å‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÅ‡∏•‡∏∞‡∏¢‡∏∏‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á

## ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå

```
license key/
‚îú‚îÄ README.md
‚îú‚îÄ package.json
‚îú‚îÄ .env.example
‚îî‚îÄ src/
   ‚îú‚îÄ server.js                 # ‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏° Express
   ‚îú‚îÄ config/
   ‚îÇ  ‚îú‚îÄ env.js                # ‡πÇ‡∏´‡∏•‡∏î‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏° (Zod validate)
   ‚îÇ  ‚îî‚îÄ database.js           # ‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° PostgreSQL
   ‚îú‚îÄ middleware/
   ‚îÇ  ‚îú‚îÄ auth.js               # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö installer/admin secret
   ‚îÇ  ‚îî‚îÄ rateLimit.js          # ‡∏ï‡∏±‡πâ‡∏á rate limit ‡πÅ‡∏¢‡∏Å‡∏ù‡∏±‡πà‡∏á installer/admin
   ‚îú‚îÄ services/
   ‚îÇ  ‚îú‚îÄ keygen.js             # ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏µ‡∏¢‡πå + checksum
   ‚îÇ  ‚îî‚îÄ licenseService.js     # ‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏´‡∏•‡∏±‡∏Å: create/validate/activate
   ‚îú‚îÄ routes/
   ‚îÇ  ‚îú‚îÄ admin.js              # Endpoint ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô
   ‚îÇ  ‚îî‚îÄ installer.js          # Endpoint ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö installer
   ‚îú‚îÄ utils/
   ‚îÇ  ‚îú‚îÄ crypto.js             # ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô checksum/token
   ‚îÇ  ‚îî‚îÄ logger.js             # ‡∏ï‡∏±‡∏ß logger (Pino)
   ‚îî‚îÄ scripts/
      ‚îî‚îÄ generate-batch.js     # CLI ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏µ‡∏¢‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏•‡πá‡∏≠‡∏ï (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á)
```

## ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

### ‡∏ï‡∏≤‡∏£‡∏≤‡∏á `licenses`
| ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå      | ‡∏ä‡∏ô‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•  | ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î                                |
|---------------|-------------|--------------------------------------------|
| id            | UUID PK     | ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ù‡∏±‡πà‡∏á‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥            |
| license_key   | TEXT UNIQUE | ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö `WM-XXXX-XXXX-XXXX-CHK`             |
| checksum      | TEXT        | SHA256 ‡πÉ‡∏ä‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏≠‡∏°‡πÅ‡∏õ‡∏•‡∏á              |
| expiry_date   | DATE        | ‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏                                 |
| max_devices   | INT         | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï                     |
| used_devices  | INT         | ‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏à‡∏£‡∏¥‡∏á                   |
| status        | TEXT        | `active`, `suspended`, `revoked`           |
| type          | TEXT        | `demo`, `full`, `oem`                      |
| metadata      | JSONB       | ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤/‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏                 |
| created_at    | TIMESTAMP   | ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô `NOW()`                       |
| updated_at    | TIMESTAMP   | ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏î‡πâ‡∏ß‡∏¢ trigger               |

### ‡∏ï‡∏≤‡∏£‡∏≤‡∏á `license_devices`
| ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå        | ‡∏ä‡∏ô‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• | ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î                                 |
|-----------------|------------|---------------------------------------------|
| id              | UUID PK    |                                             |
| license_id      | UUID FK    | FK ‡πÑ‡∏õ‡∏¢‡∏±‡∏á `licenses.id`                      |
| hwid            | TEXT       | ‡∏•‡∏≤‡∏¢‡∏ô‡∏¥‡πâ‡∏ß‡∏°‡∏∑‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á (Hardware ID)           |
| installer_ver   | TEXT       | ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô installer ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ activate        |
| activated_at    | TIMESTAMP  | ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏° activate                      |
| last_used       | TIMESTAMP  | ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏°‡∏∑‡πà‡∏≠ heartbeat                      |
| status          | TEXT       | `active`, `blocked`                         |

## API ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô (Initial Surface)

| Endpoint | Method | ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ |
|----------|--------|----------|
| `/api/v1/licenses/validate` | POST | ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏µ‡∏¢‡πå + HWID ‡∏ï‡∏≠‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á |
| `/api/v1/licenses/heartbeat` | POST | ‡πÅ‡∏à‡πâ‡∏á‡∏ß‡πà‡∏≤‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏° (update `last_used`) |
| `/api/v1/admin/licenses` | POST | ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏µ‡∏¢‡πå (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö batch) |
| `/api/v1/admin/licenses/:key/revoke` | POST | ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÑ‡∏•‡πÄ‡∏ã‡∏ô‡∏™‡πå (revoke/suspend) |
| `/api/v1/admin/licenses/:key/devices` | GET | ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà activate |

## ‡∏°‡∏≤‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ (Security Controls)

# ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÑ‡∏•‡πÄ‡∏ã‡∏ô‡∏™‡πå WebMeter

‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÑ‡∏•‡πÄ‡∏ã‡∏ô‡∏™‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á WebMeter ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡∏Ñ‡∏µ‡∏¢‡πå ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô HWID ‡πÅ‡∏•‡∏∞‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏°‡∏≤‡πÉ‡∏´‡πâ‡∏î‡∏µ‡∏û‡∏•‡∏≠‡∏¢‡∏ö‡∏ô Railway ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö Inno Setup

## ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö (System Overview)

1. **License Key Generator (Keygen)**
   - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏µ‡∏¢‡πå‡∏ó‡∏µ‡∏•‡∏∞‡∏ä‡∏∏‡∏î‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡∏∞‡∏´‡∏•‡∏≤‡∏¢ ‡πÜ ‡∏Ñ‡∏µ‡∏¢‡πå (batch)
   - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î ‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÑ‡∏•‡πÄ‡∏ã‡∏ô‡∏™‡πå (demo/full/OEM) ‡πÑ‡∏î‡πâ
   - ‡∏°‡∏µ checksum ‡πÅ‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏±‡∏ô‡∏Ñ‡∏µ‡∏¢‡πå‡∏õ‡∏•‡∏≠‡∏°
   - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á PostgreSQL ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
2. **License Validation Server (API)**
   - REST API ‡πÉ‡∏´‡πâ‡∏ù‡∏±‡πà‡∏á installer ‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö installer secret, ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏µ‡∏¢‡πå, ‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ ‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ
   - ‡πÄ‡∏Å‡πá‡∏ö log ‡∏ó‡∏∏‡∏Å‡∏Å‡∏≤‡∏£ activate ‡∏û‡∏£‡πâ‡∏≠‡∏° HWID/metadata
   - ‡∏°‡∏µ endpoint ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏µ‡∏¢‡πå (revoke/suspend) ‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
3. **‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏±‡∏ö Inno Setup**
   - Installer ‡∏™‡πà‡∏á `{licenseKey, hwid, installerSecret, installerVersion}` ‡∏°‡∏≤‡∏ó‡∏µ‡πà `/api/v1/licenses/validate`
   - ‡∏£‡∏±‡∏ö‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î (`VALID`, `INVALID_INSTALLER`, `KEY_EXPIRED`, ‡∏Ø‡∏•‡∏Ø)
   - ‡∏ñ‡πâ‡∏≤‡∏ñ‡∏π‡∏Å‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÅ‡∏•‡∏∞‡∏¢‡∏∏‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á

## ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå

```
license key/
‚îú‚îÄ README.md
‚îú‚îÄ package.json
‚îú‚îÄ .env.example
‚îî‚îÄ src/
   ‚îú‚îÄ server.js                 # ‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏° Express
   ‚îú‚îÄ config/
   ‚îÇ  ‚îú‚îÄ env.js                # ‡πÇ‡∏´‡∏•‡∏î‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏° (Zod validate)
   ‚îÇ  ‚îî‚îÄ database.js           # ‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° PostgreSQL
   ‚îú‚îÄ middleware/
   ‚îÇ  ‚îú‚îÄ auth.js               # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö installer/admin secret
   ‚îÇ  ‚îî‚îÄ rateLimit.js          # ‡∏ï‡∏±‡πâ‡∏á rate limit ‡πÅ‡∏¢‡∏Å‡∏ù‡∏±‡πà‡∏á installer/admin
   ‚îú‚îÄ services/
   ‚îÇ  ‚îú‚îÄ keygen.js             # ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏µ‡∏¢‡πå + checksum
   ‚îÇ  ‚îî‚îÄ licenseService.js     # ‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏´‡∏•‡∏±‡∏Å: create/validate/activate
   ‚îú‚îÄ routes/
   ‚îÇ  ‚îú‚îÄ admin.js              # Endpoint ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô
   ‚îÇ  ‚îî‚îÄ installer.js          # Endpoint ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö installer
   ‚îú‚îÄ utils/
   ‚îÇ  ‚îú‚îÄ crypto.js             # ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô checksum/token
   ‚îÇ  ‚îî‚îÄ logger.js             # ‡∏ï‡∏±‡∏ß logger (Pino)
   ‚îî‚îÄ scripts/
      ‚îî‚îÄ generate-batch.js     # CLI ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏µ‡∏¢‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏•‡πá‡∏≠‡∏ï (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á)
```

## ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

### ‡∏ï‡∏≤‡∏£‡∏≤‡∏á `licenses`
| ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå      | ‡∏ä‡∏ô‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•  | ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î                                |
|---------------|-------------|--------------------------------------------|
| id            | UUID PK     | ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ù‡∏±‡πà‡∏á‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥            |
| license_key   | TEXT UNIQUE | ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö `WM-XXXX-XXXX-XXXX-CHK`             |
| checksum      | TEXT        | SHA256 ‡πÉ‡∏ä‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏≠‡∏°‡πÅ‡∏õ‡∏•‡∏á              |
| expiry_date   | DATE        | ‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏                                 |
| max_devices   | INT         | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï                     |
| used_devices  | INT         | ‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏à‡∏£‡∏¥‡∏á                   |
| status        | TEXT        | `active`, `suspended`, `revoked`           |
| type          | TEXT        | `demo`, `full`, `oem`                      |
| metadata      | JSONB       | ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤/‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏                 |
| created_at    | TIMESTAMP   | ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô `NOW()`                       |
| updated_at    | TIMESTAMP   | ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏î‡πâ‡∏ß‡∏¢ trigger               |

### ‡∏ï‡∏≤‡∏£‡∏≤‡∏á `license_devices`
| ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå        | ‡∏ä‡∏ô‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• | ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î                                 |
|-----------------|------------|---------------------------------------------|
| id              | UUID PK    |                                             |
| license_id      | UUID FK    | FK ‡πÑ‡∏õ‡∏¢‡∏±‡∏á `licenses.id`                      |
| hwid            | TEXT       | ‡∏•‡∏≤‡∏¢‡∏ô‡∏¥‡πâ‡∏ß‡∏°‡∏∑‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á (Hardware ID)           |
| installer_ver   | TEXT       | ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô installer ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ activate        |
| activated_at    | TIMESTAMP  | ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏° activate                      |
| last_used       | TIMESTAMP  | ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏°‡∏∑‡πà‡∏≠ heartbeat                      |
| status          | TEXT       | `active`, `blocked`                         |

## API ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô (Initial Surface)

| Endpoint | Method | ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ |
|----------|--------|----------|
| `/api/v1/licenses/validate` | POST | ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏µ‡∏¢‡πå + HWID ‡∏ï‡∏≠‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á |
| `/api/v1/licenses/heartbeat` | POST | ‡πÅ‡∏à‡πâ‡∏á‡∏ß‡πà‡∏≤‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏° (update `last_used`) |
| `/api/v1/admin/licenses` | POST | ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏µ‡∏¢‡πå (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö batch) |
| `/api/v1/admin/licenses/:key/revoke` | POST | ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÑ‡∏•‡πÄ‡∏ã‡∏ô‡∏™‡πå (revoke/suspend) |
| `/api/v1/admin/licenses/:key/devices` | GET | ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà activate |

## ‡∏°‡∏≤‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ (Security Controls)

- **Installer Secret**: ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏à‡∏≤‡∏Å installer ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á header `x-installer-secret` ‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå
- **Checksum + Signature**: ‡∏Ñ‡∏µ‡∏¢‡πå‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß‡∏°‡∏µ checksum ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏≤‡∏™‡∏∏‡πà‡∏°
- **Rate Limit**: ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ï‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ ‡πÅ‡∏¢‡∏Å‡∏ù‡∏±‡πà‡∏á installer ‡πÅ‡∏•‡∏∞ admin ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏Å‡∏≤‡∏£ brute force
- **Tokenized Response**: ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏µ‡∏¢‡πå‡∏ú‡πà‡∏≤‡∏ô ‡∏à‡∏∞‡πÑ‡∏î‡πâ token ‡∏™‡∏±‡πâ‡∏ô ‡πÜ ‡πÉ‡∏´‡πâ installer ‡πÉ‡∏ä‡πâ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
- **Logging**: ‡πÉ‡∏ä‡πâ Pino ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏∏‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏µ‡∏¢‡πå‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£ validate ‡πÄ‡∏û‡∏∑‡πà‡∏≠ audit

## üöÄ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏î‡∏µ‡∏û‡∏•‡∏≠‡∏¢‡∏ö‡∏ô Railway

### Quick Start (5 ‡∏ô‡∏≤‡∏ó‡∏µ)
‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏â‡∏ö‡∏±‡∏ö‡∏¢‡πà‡∏≠: **[QUICK_START.md](QUICK_START.md)**

### ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡πÅ‡∏ö‡∏ö‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏â‡∏ö‡∏±‡∏ö‡πÄ‡∏ï‡πá‡∏°: **[RAILWAY_SETUP.md](RAILWAY_SETUP.md)**

### ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤
‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‡∏≠‡πà‡∏≤‡∏ô: **[RAILWAY_TROUBLESHOOTING.md](RAILWAY_TROUBLESHOOTING.md)**

### ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
‡∏î‡∏π‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á: **[DEPLOYMENT_SUMMARY.md](DEPLOYMENT_SUMMARY.md)**

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏™‡∏±‡πâ‡∏ô ‡πÜ
1. Push ‡πÇ‡∏Ñ‡πâ‡∏î‡∏Ç‡∏∂‡πâ‡∏ô GitHub
2. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÉ‡∏´‡∏°‡πà‡∏ö‡∏ô Railway ‚Üí Deploy from GitHub
3. ‡πÄ‡∏û‡∏¥‡πà‡∏° PostgreSQL add-on
4. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Environment Variables (‡∏î‡∏π‡πÉ‡∏ô [RAILWAY_SETUP.md](RAILWAY_SETUP.md))
5. ‡∏£‡∏±‡∏ô schema: `psql < src/scripts/schema.sql`
6. Redeploy ‡πÅ‡∏•‡∏∞‡∏ó‡∏î‡∏™‡∏≠‡∏ö `/health` endpoint

**‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ script ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥:**
- Windows: `.\deploy-railway.ps1`
- Linux/Mac: `./deploy-railway.sh`

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
1. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á dependency (`npm install`) ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `.env`
2. ‡∏™‡∏£‡πâ‡∏≤‡∏á CLI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö batch generator (‡πÑ‡∏ü‡∏•‡πå `scripts/generate-batch.js`)
3. ‡πÄ‡∏û‡∏¥‡πà‡∏° endpoint ‡πÄ‡∏™‡∏£‡∏¥‡∏° ‡πÄ‡∏ä‡πà‡∏ô ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ ‡∏´‡∏£‡∏∑‡∏≠ webhook ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
4. ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏î Inno Setup ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡∏û‡∏£‡πâ‡∏≠‡∏° mapping error message ‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
